@startuml
title 智能体四层架构

skinparam backgroundColor #FEFEFE
skinparam component {
  BackgroundColor #3498DB
  FontColor white
  BorderColor #2980B9
}
skinparam package {
  BackgroundColor #ECF0F1
  BorderColor #BDC3C7
}
skinparam interface {
  BackgroundColor #2ECC71
}

package "智能体系统 Agent System" {

  package "规划层 Planning Layer" #E8F8F5 {
    component [目标分解\nGoal Decomposition] as GD
    component [任务规划\nTask Planning] as TP
    component [策略选择\nStrategy Selection] as SS
  }

  package "推理层 Reasoning Layer" #FEF9E7 {
    component [大语言模型\nLLM] as LLM
    component [思维链\nChain of Thought] as CoT
    component [反思机制\nReflection] as Ref
  }

  package "记忆层 Memory Layer" #F4ECF7 {
    component [短期记忆\nShort-term Memory] as STM
    component [长期记忆\nLong-term Memory] as LTM
    component [工作记忆\nWorking Memory] as WM
  }

  package "工具层 Tool Layer" #EBF5FB {
    component [代码执行\nCode Executor] as CE
    component [网络搜索\nWeb Search] as WS
    component [文件操作\nFile Operations] as FO
    component [API 调用\nAPI Calls] as API
  }
}

' 层间连接
GD --> TP
TP --> SS
SS --> LLM

LLM --> CoT
CoT --> Ref
Ref --> LLM

LLM <--> STM
LLM <--> WM
STM <--> LTM

LLM --> CE
LLM --> WS
LLM --> FO
LLM --> API

' 外部接口
interface "用户输入" as UI
interface "环境反馈" as EF
interface "执行结果" as ER

UI --> GD
EF --> LLM
API --> ER
CE --> ER
WS --> ER
FO --> ER

note right of LLM
  核心决策引擎
  负责理解、推理、生成
end note

note bottom of LTM
  持久化存储
  支持语义检索
end note

@enduml
