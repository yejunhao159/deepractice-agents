# 7.3 æ ¸å¿ƒæ¦‚å¿µ

> ç†è§£ AgentX çš„æ¶æ„åŸºçŸ³

æœ¬èŠ‚å°†æ·±å…¥è®²è§£ AgentX çš„æ ¸å¿ƒç»„ä»¶ï¼Œè¿™äº›ç»„ä»¶å…±åŒæ„æˆäº†äº‹ä»¶é©±åŠ¨æ™ºèƒ½ä½“çš„è¿è¡ŒåŸºç¡€ã€‚

---

## 7.3.1 AgentEngineï¼šæ™ºèƒ½ä½“å¼•æ“

### ä»€ä¹ˆæ˜¯ AgentEngine

**AgentEngine** æ˜¯ AgentX çš„æ ¸å¿ƒå¼•æ“ï¼Œè´Ÿè´£å¤„ç†æ™ºèƒ½ä½“çš„æ‰€æœ‰çŠ¶æ€è½¬æ¢å’Œäº‹ä»¶æµã€‚å®ƒå®ç°äº† Mealy Machine æ¨¡å¼ï¼Œå°† LLM çš„å¼‚æ­¥å“åº”è½¬æ¢ä¸ºå¯é¢„æµ‹çš„äº‹ä»¶æµã€‚

```typescript
import { AgentEngine } from '@agentxjs/agent'

const engine = new AgentEngine({
  model: 'claude-sonnet-4-20250514',
  apiKey: process.env.ANTHROPIC_API_KEY
})
```

### çŠ¶æ€å®šä¹‰

AgentEngine ç»´æŠ¤ä»¥ä¸‹æ ¸å¿ƒçŠ¶æ€ï¼š

| çŠ¶æ€ | è¯´æ˜ | å¯è½¬æ¢åˆ° |
|-----|------|---------|
| **idle** | ç©ºé—²ï¼Œç­‰å¾…ç”¨æˆ·è¾“å…¥ | thinking |
| **thinking** | æ€è€ƒä¸­ï¼Œå¤„ç† LLM å“åº” | idle, tool_calling, error |
| **tool_calling** | æ‰§è¡Œå·¥å…·è°ƒç”¨ | thinking, error |
| **error** | é”™è¯¯çŠ¶æ€ | idle |

### çŠ¶æ€è½¬æ¢å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                   â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”   user_message   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚    â”‚       â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”‚          â”‚      â”‚
â”‚    â”‚ idle  â”‚                  â”‚ thinking â”‚      â”‚
â”‚    â”‚       â”‚ â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚          â”‚      â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”˜   message_done   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜      â”‚
â”‚        â†‘                           â”‚            â”‚
â”‚        â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚        â”‚       â”‚ tool_use                       â”‚
â”‚        â”‚       â†“                                â”‚
â”‚        â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚        â”‚   â”‚              â”‚                     â”‚
â”‚        â””â”€â”€â”€â”‚ tool_calling â”‚                     â”‚
â”‚ tool_resultâ”‚              â”‚                     â”‚
â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### è¾“å…¥å¤„ç†

AgentEngine å¤„ç†ä»¥ä¸‹ç±»å‹çš„è¾“å…¥ï¼š

```typescript
// ç”¨æˆ·æ¶ˆæ¯
engine.input({ type: 'user_message', content: 'å¸®æˆ‘å†™ä¸€æ®µä»£ç ' })

// LLM å“åº”å—
engine.input({ type: 'llm_chunk', delta: 'å¥½çš„ï¼Œæˆ‘æ¥' })

// å·¥å…·è°ƒç”¨è¯·æ±‚
engine.input({ type: 'tool_use', name: 'search', input: { query: '...' } })

// å·¥å…·è°ƒç”¨ç»“æœ
engine.input({ type: 'tool_result', name: 'search', output: { ... } })

// LLM å“åº”ç»“æŸ
engine.input({ type: 'llm_end' })
```

### è¾“å‡ºäº‹ä»¶

æ¯æ¬¡çŠ¶æ€è½¬æ¢éƒ½ä¼šäº§ç”Ÿè¾“å‡ºäº‹ä»¶ï¼š

```typescript
engine.on('output', (events) => {
  for (const event of events) {
    switch (event.type) {
      case 'thinking_start':
        console.log('å¼€å§‹æ€è€ƒ...')
        break
      case 'text_delta':
        process.stdout.write(event.delta)
        break
      case 'tool_start':
        console.log(`è°ƒç”¨å·¥å…·: ${event.name}`)
        break
      case 'tool_end':
        console.log(`å·¥å…·è¿”å›: ${event.output}`)
        break
      case 'thinking_end':
        console.log('æ€è€ƒç»“æŸ')
        break
      case 'message_complete':
        console.log(`æ¶ˆæ¯å®Œæˆ: ${event.id}`)
        break
    }
  }
})
```

---

## 7.3.2 SystemBusï¼šäº‹ä»¶æ€»çº¿

### ä»€ä¹ˆæ˜¯ SystemBus

**SystemBus** æ˜¯ AgentX çš„ä¸­å¤®äº‹ä»¶æ€»çº¿ï¼Œå®ç°äº†å‘å¸ƒ-è®¢é˜…æ¨¡å¼ã€‚æ‰€æœ‰ç»„ä»¶é€šè¿‡ SystemBus è¿›è¡Œé€šä¿¡ï¼Œå®ç°å®Œå…¨è§£è€¦ã€‚

```typescript
import { SystemBus } from '@agentxjs/runtime'

const bus = new SystemBus()
```

### äº‹ä»¶è®¢é˜…

```typescript
// è®¢é˜…å•ä¸ªäº‹ä»¶
bus.on('thinking_start', (event) => {
  console.log('AI å¼€å§‹æ€è€ƒ')
})

// è®¢é˜…å¤šä¸ªäº‹ä»¶
bus.on(['text_delta', 'tool_delta'], (event) => {
  console.log('æ”¶åˆ°å¢é‡æ•°æ®')
})

// è®¢é˜…æ‰€æœ‰äº‹ä»¶
bus.on('*', (event) => {
  console.log(`äº‹ä»¶: ${event.type}`)
})

// ä¸€æ¬¡æ€§è®¢é˜…
bus.once('message_complete', (event) => {
  console.log('é¦–æ¡æ¶ˆæ¯å®Œæˆ')
})
```

### äº‹ä»¶å‘å¸ƒ

```typescript
// å‘å¸ƒäº‹ä»¶
bus.emit('user_message', {
  id: 'msg_001',
  content: 'ä½ å¥½',
  timestamp: Date.now()
})

// å‘å¸ƒå¤šä¸ªäº‹ä»¶
bus.emitBatch([
  { type: 'thinking_start' },
  { type: 'text_delta', delta: 'ä½ å¥½' },
  { type: 'thinking_end' }
])
```

### äº‹ä»¶è¿‡æ»¤

```typescript
// æŒ‰ç±»å‹è¿‡æ»¤
const textEvents = bus.filter((event) => event.type === 'text_delta')

// é“¾å¼å¤„ç†
bus.on('text_delta')
   .filter((e) => e.delta.length > 0)
   .map((e) => e.delta.toUpperCase())
   .subscribe((delta) => console.log(delta))
```

### äº‹ä»¶å†å²

```typescript
// è·å–äº‹ä»¶å†å²
const history = bus.getHistory()
console.log(`å…± ${history.length} ä¸ªäº‹ä»¶`)

// é‡æ”¾äº‹ä»¶
bus.replay(history)

// æ¸…ç©ºå†å²
bus.clearHistory()
```

---

## 7.3.3 Driver ä¸ Presenter æ¨¡å¼

### ä»€ä¹ˆæ˜¯ Driver/Presenter

AgentX é‡‡ç”¨ **Driver/Presenter** æ¨¡å¼æ¥åˆ†ç¦»è¾“å…¥å¤„ç†å’Œè¾“å‡ºå±•ç¤ºï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚         â”‚ â”€â”€â”€â†’ â”‚           â”‚ â”€â”€â”€â†’ â”‚           â”‚   â”‚
â”‚   â”‚ Driver  â”‚      â”‚ SystemBus â”‚      â”‚ Presenter â”‚   â”‚
â”‚   â”‚ (è¾“å…¥)  â”‚      â”‚  (äº‹ä»¶)   â”‚      â”‚  (è¾“å‡º)   â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                          â”‚
â”‚   ç”¨æˆ·è¾“å…¥ â”€â”€â”€â”€â”€â†’ äº‹ä»¶æµ â”€â”€â”€â”€â”€â†’ ç•Œé¢å±•ç¤º                â”‚
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Driverï¼šè¾“å…¥é©±åŠ¨

Driver è´Ÿè´£å°†å¤–éƒ¨è¾“å…¥è½¬æ¢ä¸ºç³»ç»Ÿäº‹ä»¶ï¼š

```typescript
import { Driver } from '@agentxjs/runtime'

// CLI Driver
class CLIDriver extends Driver {
  constructor(bus: SystemBus) {
    super(bus)
  }

  start() {
    const rl = readline.createInterface({
      input: process.stdin,
      output: process.stdout
    })

    rl.on('line', (line) => {
      this.bus.emit('user_message', {
        id: generateId(),
        content: line,
        timestamp: Date.now()
      })
    })
  }
}

// HTTP Driver
class HTTPDriver extends Driver {
  start() {
    app.post('/chat', (req, res) => {
      this.bus.emit('user_message', {
        id: generateId(),
        content: req.body.message,
        timestamp: Date.now()
      })
    })
  }
}

// WebSocket Driver
class WebSocketDriver extends Driver {
  start() {
    wss.on('connection', (ws) => {
      ws.on('message', (data) => {
        const { content } = JSON.parse(data)
        this.bus.emit('user_message', {
          id: generateId(),
          content,
          timestamp: Date.now()
        })
      })
    })
  }
}
```

### Presenterï¼šè¾“å‡ºå±•ç¤º

Presenter è´Ÿè´£å°†äº‹ä»¶è½¬æ¢ä¸ºç”¨æˆ·å¯è§çš„è¾“å‡ºï¼š

```typescript
import { Presenter } from '@agentxjs/runtime'

// CLI Presenter
class CLIPresenter extends Presenter {
  constructor(bus: SystemBus) {
    super(bus)
    this.setup()
  }

  setup() {
    this.bus.on('thinking_start', () => {
      process.stdout.write('ğŸ¤” ')
    })

    this.bus.on('text_delta', (event) => {
      process.stdout.write(event.delta)
    })

    this.bus.on('thinking_end', () => {
      console.log('\nâœ… å®Œæˆ')
    })

    this.bus.on('error', (event) => {
      console.error(`âŒ é”™è¯¯: ${event.message}`)
    })
  }
}

// React Presenter
class ReactPresenter extends Presenter {
  private setMessages: React.Dispatch<...>

  setup() {
    this.bus.on('text_delta', (event) => {
      this.setMessages(prev => {
        const last = prev[prev.length - 1]
        return [...prev.slice(0, -1), {
          ...last,
          content: last.content + event.delta
        }]
      })
    })

    this.bus.on('message_complete', (event) => {
      this.setMessages(prev => [...prev, {
        id: event.id,
        role: 'assistant',
        content: event.content
      }])
    })
  }
}
```

### ä¼˜åŠ¿

| ä¼˜åŠ¿ | è¯´æ˜ |
|-----|------|
| **è§£è€¦** | è¾“å…¥å’Œè¾“å‡ºå®Œå…¨ç‹¬ç«‹ï¼Œå¯å•ç‹¬æµ‹è¯•å’Œæ›¿æ¢ |
| **å¯ç»„åˆ** | å¯ä»¥ç»„åˆå¤šä¸ª Driver å’Œ Presenter |
| **å¯æµ‹è¯•** | é€šè¿‡ Mock äº‹ä»¶è½»æ¾æµ‹è¯•å„ç»„ä»¶ |
| **å¯æ‰©å±•** | æ·»åŠ æ–°çš„è¾“å…¥æºæˆ–è¾“å‡ºç›®æ ‡ä¸å½±å“å…¶ä»–ä»£ç  |

---

## 7.3.4 Agent æ¥å£

### åˆ›å»º Agent

`createAgent` æ˜¯åˆ›å»ºæ™ºèƒ½ä½“çš„ä¸»è¦å…¥å£ï¼š

```typescript
import { createAgent } from '@agentxjs/runtime'

const agent = await createAgent({
  // å¿…éœ€é…ç½®
  model: 'claude-sonnet-4-20250514',
  apiKey: process.env.ANTHROPIC_API_KEY,

  // å¯é€‰é…ç½®
  systemPrompt: 'ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„åŠ©æ‰‹',
  persistence: new SQLiteDriver('data.db'),
  mcpServers: [
    { name: 'filesystem', command: 'npx', args: [...] }
  ]
})
```

### Agent æ–¹æ³•

```typescript
// åŒæ­¥èŠå¤©ï¼ˆç­‰å¾…å®Œæ•´å“åº”ï¼‰
const response = await agent.chat('ä½ å¥½')
console.log(response)

// æµå¼èŠå¤©
for await (const chunk of agent.stream('ç»™æˆ‘è®²ä¸ªæ•…äº‹')) {
  process.stdout.write(chunk)
}

// äº‹ä»¶ç›‘å¬
agent.on('thinking_start', () => { ... })
agent.on('text_delta', (e) => { ... })
agent.on('tool_start', (e) => { ... })
agent.on('message_complete', (e) => { ... })

// è·å–å†å²
const messages = await agent.getMessages()

// æ¸…ç©ºå†å²
await agent.clearMessages()

// é”€æ¯æ™ºèƒ½ä½“
await agent.destroy()
```

### é«˜çº§é…ç½®

```typescript
const agent = await createAgent({
  model: 'claude-sonnet-4-20250514',
  apiKey: process.env.ANTHROPIC_API_KEY,

  // æ¨¡å‹å‚æ•°
  maxTokens: 4096,
  temperature: 0.7,

  // é‡è¯•é…ç½®
  retry: {
    maxRetries: 3,
    retryDelay: 1000
  },

  // è¶…æ—¶é…ç½®
  timeout: 60000,

  // é’©å­å‡½æ•°
  hooks: {
    beforeRequest: async (messages) => {
      console.log('è¯·æ±‚å‰:', messages.length, 'æ¡æ¶ˆæ¯')
      return messages
    },
    afterResponse: async (response) => {
      console.log('å“åº”å:', response.usage)
      return response
    }
  }
})
```

---

## 7.3.5 ç»„ä»¶åä½œ

### å®Œæ•´çš„äº‹ä»¶æµ

```
ç”¨æˆ·è¾“å…¥ "å†™ä¸€æ®µä»£ç "
    â”‚
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Driver                                                   â”‚
â”‚  å°†è¾“å…¥è½¬æ¢ä¸º user_message äº‹ä»¶                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â†“ emit('user_message', {...})
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SystemBus                                                â”‚
â”‚  å¹¿æ’­äº‹ä»¶åˆ°æ‰€æœ‰è®¢é˜…è€…                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â†“ on('user_message')
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AgentEngine                                              â”‚
â”‚  çŠ¶æ€è½¬æ¢: idle â†’ thinking                                â”‚
â”‚  è¾“å‡ºäº‹ä»¶: thinking_start                                 â”‚
â”‚  è°ƒç”¨ LLM API                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â†“ emit('thinking_start'), emit('text_delta'), ...
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SystemBus                                                â”‚
â”‚  å¹¿æ’­äº‹ä»¶                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â†“ on('text_delta')
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Presenter                                                â”‚
â”‚  æ˜¾ç¤ºæµå¼æ–‡æœ¬                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â†“
ç”¨æˆ·çœ‹åˆ° AI é€å­—è¾“å‡ºå“åº”
```

### ä»£ç ç¤ºä¾‹

```typescript
import { createAgent, SystemBus, CLIDriver, CLIPresenter } from '@agentxjs/runtime'

async function main() {
  // åˆ›å»ºäº‹ä»¶æ€»çº¿
  const bus = new SystemBus()

  // åˆ›å»ºæ™ºèƒ½ä½“
  const agent = await createAgent({
    model: 'claude-sonnet-4-20250514',
    apiKey: process.env.ANTHROPIC_API_KEY,
    bus // å…±äº«äº‹ä»¶æ€»çº¿
  })

  // åˆ›å»ºè¾“å…¥é©±åŠ¨
  const driver = new CLIDriver(bus)

  // åˆ›å»ºè¾“å‡ºå±•ç¤º
  const presenter = new CLIPresenter(bus)

  // å¯åŠ¨
  console.log('æ™ºèƒ½ä½“å·²å¯åŠ¨ï¼Œè¯·è¾“å…¥æ¶ˆæ¯ï¼š')
  driver.start()
}

main()
```

---

## æœ¬èŠ‚è¦ç‚¹

1. **AgentEngine**ï¼šåŸºäº Mealy Machine çš„çŠ¶æ€æœºå¼•æ“
2. **SystemBus**ï¼šå‘å¸ƒ-è®¢é˜…æ¨¡å¼çš„äº‹ä»¶æ€»çº¿
3. **Driver/Presenter**ï¼šåˆ†ç¦»è¾“å…¥å¤„ç†å’Œè¾“å‡ºå±•ç¤º
4. **Agent æ¥å£**ï¼šç»Ÿä¸€çš„æ™ºèƒ½ä½“åˆ›å»ºå’Œæ“ä½œ API
5. **ç»„ä»¶åä½œ**ï¼šé€šè¿‡äº‹ä»¶æµå®ç°æ¾è€¦åˆçš„ç»„ä»¶é€šä¿¡

---

## ä¸‹ä¸€æ­¥

ç†è§£äº†æ ¸å¿ƒæ¦‚å¿µåï¼Œä¸‹ä¸€èŠ‚æˆ‘ä»¬å°†æ·±å…¥äº†è§£ AgentX çš„è¿è¡Œæ—¶ç³»ç»Ÿï¼ŒåŒ…æ‹¬ Containerã€Environment å’Œ Persistence ç­‰ç»„ä»¶ã€‚

---

[ä¸Šä¸€èŠ‚ï¼šå¿«é€Ÿå¼€å§‹](7.2-å¿«é€Ÿå¼€å§‹.md) | [ä¸‹ä¸€èŠ‚ï¼šè¿è¡Œæ—¶ç³»ç»Ÿ](7.4-è¿è¡Œæ—¶ç³»ç»Ÿ.md)
