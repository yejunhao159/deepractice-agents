# ç¬¬7ç« ï¼šAgentX äº‹ä»¶é©±åŠ¨æ™ºèƒ½ä½“æ¡†æ¶

> ä»ç†è®ºåˆ°å®è·µ â€”â€” ç”¨äº‹ä»¶é©±åŠ¨æ¶æ„æ„å»ºç”Ÿäº§çº§æ™ºèƒ½ä½“

åœ¨ç¬¬å…­ç« ä¸­ï¼Œæˆ‘ä»¬å­¦ä¹ äº† Deepractice å›¢é˜Ÿæå‡ºçš„å¤šæ™ºèƒ½ä½“åä½œæ–¹æ³•è®ºï¼š4P ç†è®ºã€AI ä»»åŠ¡çŠ¶æ€æœºã€PATEOAS å’Œ AI ç»„ç»‡åŒ–ã€‚è¿™äº›æ–¹æ³•è®ºå›ç­”äº†"åº”è¯¥å¦‚ä½•è®¾è®¡"çš„é—®é¢˜ã€‚

æœ¬ç« å°†ä»‹ç» **AgentX** â€”â€” Deepractice å›¢é˜Ÿå¼€å‘çš„äº‹ä»¶é©±åŠ¨æ™ºèƒ½ä½“æ¡†æ¶ã€‚AgentX æ˜¯è¿™äº›æ–¹æ³•è®ºçš„å·¥ç¨‹å®ç°ï¼Œå®ƒå°†ç¬¬äº”ç«  PromptX çš„è®¤çŸ¥èƒ½åŠ›ä¸ç¬¬å…­ç« çš„è®¾è®¡åŸåˆ™ç»“åˆï¼Œæä¾›äº†ä¸€ä¸ªå®Œæ•´çš„æ™ºèƒ½ä½“å¼€å‘å’Œè¿è¡Œæ—¶å¹³å°ã€‚

---

## æœ¬ç« æ ¸å¿ƒé—®é¢˜

åœ¨å¼€å§‹å­¦ä¹ ä¹‹å‰ï¼Œè¯·æ€è€ƒè¿™äº›é—®é¢˜ï¼š

> **é—®é¢˜ä¸€**ï¼šä¸ºä»€ä¹ˆæ™ºèƒ½ä½“éœ€è¦"äº‹ä»¶é©±åŠ¨"æ¶æ„ï¼Ÿä¼ ç»Ÿçš„è¯·æ±‚-å“åº”æ¨¡å¼æœ‰ä»€ä¹ˆä¸è¶³ï¼Ÿ

> **é—®é¢˜äºŒ**ï¼šå¦‚ä½•è®©æ™ºèƒ½ä½“çš„çŠ¶æ€åœ¨å¤šè½®å¯¹è¯ä¸­ä¿æŒè¿ç»­ï¼Ÿ

> **é—®é¢˜ä¸‰**ï¼šå¦‚ä½•å°† PromptX çš„è§’è‰²ã€å·¥å…·ã€è®°å¿†èƒ½åŠ›é›†æˆåˆ°ä¸€ä¸ªå¯è¿è¡Œçš„ç³»ç»Ÿä¸­ï¼Ÿ

> **é—®é¢˜å››**ï¼šç”Ÿäº§ç¯å¢ƒçš„æ™ºèƒ½ä½“ç³»ç»Ÿéœ€è¦è€ƒè™‘å“ªäº›å·¥ç¨‹é—®é¢˜ï¼Ÿ

---

## æœ¬ç« ç›®å½•

| èŠ‚ | æ ‡é¢˜ | æ ¸å¿ƒå†…å®¹ | é¢„è®¡é˜…è¯»æ—¶é—´ |
|----|------|---------|-------------|
| 7.1 | [AgentX ç®€ä»‹ä¸è®¾è®¡å“²å­¦](7.1-AgentXç®€ä»‹ä¸è®¾è®¡å“²å­¦.md) | äº‹ä»¶é©±åŠ¨æ¶æ„ã€Mealy Machineã€å››å±‚äº‹ä»¶æ¨¡å‹ | 20åˆ†é’Ÿ |
| 7.2 | [å¿«é€Ÿå¼€å§‹](7.2-å¿«é€Ÿå¼€å§‹.md) | å®‰è£…é…ç½®ã€ç¬¬ä¸€ä¸ªæ™ºèƒ½ä½“ã€Portagent ä½“éªŒ | 15åˆ†é’Ÿ |
| 7.3 | [æ ¸å¿ƒæ¦‚å¿µ](7.3-æ ¸å¿ƒæ¦‚å¿µ.md) | AgentEngineã€SystemBusã€Driver/Presenter | 25åˆ†é’Ÿ |
| 7.4 | [è¿è¡Œæ—¶ç³»ç»Ÿ](7.4-è¿è¡Œæ—¶ç³»ç»Ÿ.md) | Containerã€Environmentã€Persistence | 25åˆ†é’Ÿ |
| 7.5 | [ä¸ PromptX é›†æˆ](7.5-ä¸PromptXé›†æˆ.md) | è§’è‰²æ¿€æ´»ã€å·¥å…·è°ƒç”¨ã€è®°å¿†ç®¡ç† | 20åˆ†é’Ÿ |
| 7.6 | [æœ¬ç« å°ç»“](7.6-æœ¬ç« å°ç»“.md) | æ ¸å¿ƒå›é¡¾ã€å­¦ä¹ æ£€æŸ¥ã€ä¸‹ä¸€æ­¥ | 10åˆ†é’Ÿ |

**æ€»è®¡é˜…è¯»æ—¶é—´**ï¼šçº¦ 2 å°æ—¶

---

## å­¦ä¹ ç›®æ ‡

å®Œæˆæœ¬ç« å­¦ä¹ åï¼Œä½ å°†èƒ½å¤Ÿï¼š

- [ ] ç†è§£**äº‹ä»¶é©±åŠ¨æ¶æ„**ç›¸æ¯”è¯·æ±‚-å“åº”æ¨¡å¼çš„ä¼˜åŠ¿
- [ ] æŒæ¡ AgentX çš„**å››å±‚äº‹ä»¶æ¨¡å‹**ï¼šStreamã€Stateã€Messageã€Turn
- [ ] ç†è§£ **Mealy Machine** æ¨¡å¼åœ¨æ™ºèƒ½ä½“ä¸­çš„åº”ç”¨
- [ ] ä½¿ç”¨ AgentX æ„å»ºä¸€ä¸ªå®Œæ•´çš„æ™ºèƒ½ä½“åº”ç”¨
- [ ] ç†è§£ **SystemBus** çš„äº‹ä»¶é€šä¿¡æœºåˆ¶
- [ ] å°† **PromptX** çš„è®¤çŸ¥èƒ½åŠ›é›†æˆåˆ° AgentX è¿è¡Œæ—¶

---

## çŸ¥è¯†å›¾è°±

```
AgentX äº‹ä»¶é©±åŠ¨æ™ºèƒ½ä½“æ¡†æ¶
â”‚
â”œâ”€â”€ ğŸ¯ è®¾è®¡å“²å­¦
â”‚   â”œâ”€â”€ äº‹ä»¶é©±åŠ¨ï¼šæ‰€æœ‰æ“ä½œé€šè¿‡äº‹ä»¶é€šä¿¡
â”‚   â”œâ”€â”€ Mealy Machineï¼š(state, input) â†’ (state, outputs)
â”‚   â”œâ”€â”€ åˆ†å±‚è§£è€¦ï¼šAgent / Runtime / Environment
â”‚   â””â”€â”€ TypeScript åŸç”Ÿï¼šç±»å‹å®‰å…¨çš„å¼€å‘ä½“éªŒ
â”‚
â”œâ”€â”€ ğŸ“¦ æ ¸å¿ƒåŒ…ç»“æ„
â”‚   â”œâ”€â”€ @agentxjs/agentï¼šAgentEngine æ ¸å¿ƒå¼•æ“
â”‚   â”œâ”€â”€ @agentxjs/runtimeï¼šè¿è¡Œæ—¶åŸºç¡€è®¾æ–½
â”‚   â”œâ”€â”€ @agentxjs/networkï¼šç½‘ç»œé€šä¿¡å±‚
â”‚   â”œâ”€â”€ @agentxjs/uiï¼šç”¨æˆ·ç•Œé¢ç»„ä»¶
â”‚   â””â”€â”€ @agentxjs/typesï¼šç±»å‹å®šä¹‰
â”‚
â”œâ”€â”€ ğŸ”„ å››å±‚äº‹ä»¶æ¨¡å‹
â”‚   â”œâ”€â”€ Stream Eventsï¼šå®æ—¶æ–‡æœ¬/å·¥å…·å¢é‡
â”‚   â”œâ”€â”€ State Eventsï¼šä¼šè¯ç”Ÿå‘½å‘¨æœŸ
â”‚   â”œâ”€â”€ Message Eventsï¼šå®Œæ•´çš„ç”¨æˆ·/åŠ©æ‰‹æ¶ˆæ¯
â”‚   â””â”€â”€ Turn Eventsï¼šåˆ†æå’Œä½¿ç”¨è¿½è¸ª
â”‚
â”œâ”€â”€ âš™ï¸ è¿è¡Œæ—¶ç»„ä»¶
â”‚   â”œâ”€â”€ SystemBusï¼šä¸­å¤®äº‹ä»¶æ€»çº¿
â”‚   â”œâ”€â”€ Containerï¼šæ™ºèƒ½ä½“ç”Ÿå‘½å‘¨æœŸç®¡ç†
â”‚   â”œâ”€â”€ Environmentï¼šå¤–éƒ¨ç³»ç»Ÿæ¥å£ï¼ˆClaude APIï¼‰
â”‚   â””â”€â”€ Persistenceï¼šæ•°æ®æŒä¹…åŒ–ï¼ˆSQLite/Memoryï¼‰
â”‚
â””â”€â”€ ğŸ”— ç”Ÿæ€é›†æˆ
    â”œâ”€â”€ PromptXï¼šè§’è‰²è®¤çŸ¥ç³»ç»Ÿ
    â”œâ”€â”€ MCPï¼šå·¥å…·åè®®æ”¯æŒ
    â””â”€â”€ Claude SDKï¼šLLM äº¤äº’
```

---

## æ ¸å¿ƒæ¦‚å¿µé¢„è§ˆ

### äº‹ä»¶é©±åŠ¨ vs è¯·æ±‚-å“åº”

```
ä¼ ç»Ÿè¯·æ±‚-å“åº”æ¨¡å¼ï¼š
ç”¨æˆ· â†’ è¯·æ±‚ â†’ æœåŠ¡å™¨ â†’ å“åº” â†’ ç”¨æˆ·
         [åŒæ­¥é˜»å¡ï¼Œç­‰å¾…å®Œæˆ]

äº‹ä»¶é©±åŠ¨æ¨¡å¼ï¼š
ç”¨æˆ· â†’ äº‹ä»¶ â†’ SystemBus â†’ å¤šä¸ªå¤„ç†å™¨å¹¶è¡Œå“åº”
         [å¼‚æ­¥éé˜»å¡ï¼Œå®æ—¶æµå¼]
```

### Mealy Machine çŠ¶æ€è½¬æ¢

```typescript
// AgentEngine çš„æ ¸å¿ƒè½¬æ¢å…¬å¼
(state, input) â†’ (state, outputs)

// ç¤ºä¾‹ï¼šå¤„ç†ç”¨æˆ·æ¶ˆæ¯
(idle, userMessage) â†’ (thinking, [startThinking])
(thinking, llmChunk) â†’ (thinking, [streamText])
(thinking, llmEnd) â†’ (idle, [messageComplete])
```

### å››å±‚äº‹ä»¶æ¨¡å‹

| å±‚çº§ | äº‹ä»¶ç±»å‹ | ç”¨é€” |
|-----|---------|------|
| **Stream** | text_delta, tool_delta | å®æ—¶æµå¼è¾“å‡º |
| **State** | thinking_start, thinking_end | ä¼šè¯çŠ¶æ€ç®¡ç† |
| **Message** | user_message, assistant_message | å®Œæ•´æ¶ˆæ¯è®°å½• |
| **Turn** | turn_complete, usage_stats | è½®æ¬¡ç»Ÿè®¡åˆ†æ |

---

## ä¸å…¶ä»–ç« èŠ‚çš„å…³ç³»

```
ç¬¬äº”ç« ï¼šPromptXï¼ˆè®¤çŸ¥èƒ½åŠ›ï¼‰
    â”‚ è§’è‰²ã€å·¥å…·ã€è®°å¿†
    â–¼
ç¬¬å…­ç« ï¼šDeepractice æ–¹æ³•è®ºï¼ˆè®¾è®¡åŸåˆ™ï¼‰
    â”‚ 4Pã€çŠ¶æ€æœºã€PATEOASã€ç»„ç»‡åŒ–
    â–¼
ã€ç¬¬ä¸ƒç« ã€‘ï¼šAgentXï¼ˆå·¥ç¨‹å®ç°ï¼‰
    â”‚ äº‹ä»¶é©±åŠ¨ã€è¿è¡Œæ—¶ã€é›†æˆ
    â–¼
ç¬¬å…«ç« ï¼šä¸»æµå¤šæ™ºèƒ½ä½“æ¡†æ¶ï¼ˆå¯¹æ¯”å­¦ä¹ ï¼‰
    â”‚ AutoGenã€AgentScopeã€CAMELã€LangGraph
    â–¼
ç¬¬ä¹ç« ï¼šè®°å¿†ä¸æ£€ç´¢ï¼ˆèƒ½åŠ›æ‰©å±•ï¼‰
```

---

## å®˜æ–¹èµ„æº

### AgentX é¡¹ç›®

| èµ„æº | æè¿° | åœ°å€ |
|-----|------|------|
| AgentX | äº‹ä»¶é©±åŠ¨æ™ºèƒ½ä½“æ¡†æ¶ | [github.com/Deepractice/AgentX](https://github.com/Deepractice/AgentX) |
| Portagent | å¼€ç®±å³ç”¨çš„æ™ºèƒ½ä½“é—¨æˆ· | é€šè¿‡ `npx @agentxjs/portagent` å¯åŠ¨ |
| NPM | åŒ…å‘å¸ƒåœ°å€ | [@agentxjs](https://www.npmjs.com/org/agentxjs) |

### å¿«é€Ÿä½“éªŒ

```bash
# æ–¹å¼ä¸€ï¼šNPX å¿«é€Ÿå¯åŠ¨ï¼ˆå¼€å‘ç¯å¢ƒï¼‰
export ANTHROPIC_API_KEY=your-api-key
npx @agentxjs/portagent

# æ–¹å¼äºŒï¼šDocker éƒ¨ç½²ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰
docker run -d \
  -e ANTHROPIC_API_KEY=your-api-key \
  -p 5200:5200 \
  agentxjs/portagent
```

---

## å¼€å§‹å­¦ä¹ 

å‡†å¤‡å¥½äº†å—ï¼Ÿè®©æˆ‘ä»¬ä»ç†è§£ AgentX çš„è®¾è®¡å“²å­¦å¼€å§‹ï¼Œçœ‹çœ‹äº‹ä»¶é©±åŠ¨æ¶æ„å¦‚ä½•æ”¹å˜æ™ºèƒ½ä½“å¼€å‘çš„æ–¹å¼ã€‚

**[å¼€å§‹å­¦ä¹ ï¼š7.1 AgentX ç®€ä»‹ä¸è®¾è®¡å“²å­¦](7.1-AgentXç®€ä»‹ä¸è®¾è®¡å“²å­¦.md)**

---

[ä¸Šä¸€ç« ï¼šDeepractice æ™ºèƒ½ä½“æ¡†æ¶ä½“ç³»](../chapter06/README.md) | [è¿”å›æ€»ç›®å½•](../README.md) | [ä¸‹ä¸€ç« ï¼šä¸»æµå¤šæ™ºèƒ½ä½“æ¡†æ¶](../chapter08/README.md)

---

*æœ€åæ›´æ–°ï¼š2025 å¹´ 12 æœˆ*
